<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-size: 2vw; 
            /* background-color: antiquewhite; */
        }

        .tbl,
        #data {
            display: flex;
            justify-content: center;
            padding-top: 5%;
        }

        table{
            background-color:azure

        } 
        td,
        th {
          padding: 1vw 0.5vw; 
        }

        button {
            background-color: blue;
            color: white; 
          padding: 5px 10px 5px 10px;
         border-radius: 5px; 
         } 
    </style>
</head>

<body>
    <div class="tbl">
        <table border="6">
            <tr>
                <th colspan="2" align="center">Registraction Form</th>
            </tr>
            <tr>
                <td> First Name </td>
                <td><input type="text" id="fname"></td>
            </tr>
            <tr>
                <td> Last Name </td>
                <td><input type="text" id="lname"></td>
            </tr>
            <tr>
                <td> Address </td>
                <td><input type="text" id="add"></td>
            </tr>
            <tr>
                <td> Mobile Number </td>
                <td><input type="number" id="num" minlength="10" maxlength="10"></td>
            </tr>
            <tr>
                <td> City </td>
                <td><input type="text" id="city"></td>
            </tr>
            <tr>
                <td> Gender </td>
                <td>&nbsp; <input type="radio" id="male" name="gen" value="Male"> Male &nbsp;&nbsp;
                    <input type="radio" id="female" name="gen" value="Female"> Female &nbsp;&nbsp;
                    <input type="radio" id="other" name="gen" value="other"> Other &nbsp;&nbsp;
                </td>
            </tr>
            <tr>
                <td align="center" id="sub_btn"><button type="button" onclick="submit_data();"
                        value="Submit">Submit</button></td>
                <td id="up_btn" align="center"></td>
            </tr>
        </table>
        <br>
    </div>
    <div id="data"></div>
    <script>

        var table = '';
        var arr_data = new Array();
        var obj = new Object();
        var id = 0;

        //Submit Data..
        function submit_data() {
            if (validations()) {
                let male = document.querySelector('#male');
                let female = document.querySelector('#female');
                let other = document.querySelector("#other");
                let gen = "";
                if (male.checked) {
                    // alert('Please choose your Gender: Male or Female or other ')
                    gen = "Male";
                } else if (female.checked) {
                    // alert('Form submitted!')
                    gen = "Female";
                } else if (other.checked) {
                    gen = "Other";
                }

                id++;
                obj = {
                    id: id,
                    fname: document.getElementById('fname').value,
                    lname: document.getElementById('lname').value,
                    add: document.getElementById('add').value,
                    num: document.getElementById('num').value,
                    city: document.getElementById('city').value,
                    // gender: document.querySelector(["input[name='gen']:checked"]).value,
                    gender: gen,
                }
                arr_data.push(obj);
                console.log(arr_data);
                show_data();
            }
        }

        //Data validations..
        function validations() {
            let fname = document.getElementById('fname').value;
            let lname = document.getElementById('lname').value;
            let add = document.getElementById('add').value;
            let num = document.getElementById('num').value;
            let city = document.getElementById('city').value;
            //  gen = document.querySelector("input[name='gen']:checked").value;
            // alert(gen)
            // let gen = document.querySelector("input[name='gen']:checked").value;
            let male = document.querySelector('#male');
            let female = document.querySelector('#female');
            let other = document.querySelector("#other");
            // let gen = "";

            // if (male.checked) {
            //     // alert('Please choose your Gender: Male or Female or other ')
            //     gen = "Male";
            // } else if(female.checked){
            //     // alert('Form submitted!')
            //     gen = "Female";
            // }else if(other.checked){
            //     gen = "Other";
            // }else{
            //     alert("Please choose your gender ")
            // }
            var regName = /^[a-zA-Z]+$/;
            if (fname == '' || fname == null) {
                alert("Please enter first name !");
                return false;
            } else if (!regName.test(fname)) {
                alert("Please enter a valid first name !");
                return false;
            } else if (lname == '' || lname == null) {
                alert("Please enter a last name!");
                return false;
            } else if (!regName.test(lname)) {
                alert("Please enter a valid last name !");
                return false;
            } else if (add == '') {
                alert("Please enter an address.");
                return false;
            } else if (isNaN(num) || num.length != 10) {
                alert("Please enter a valid phone number with 10 digits.");
                return false;
            } else if (isNaN(num) || city == '') {
                alert("Please enter valid city.");
                return false;
            }
            else if (!male.checked && !female.checked && !other.checked) {
                alert("Please select your Gender.");
                return false;
            }
            else {
                return true;
            }

        }

        //Show data in table..
        function show_data() {
            table = `<table border='4'>
                <tr>
                <th> Id </th>
                <th> First Name </th>
                <th> last Name </th>
                <th> Address </th>
                <th>Mobile Number </th>
                <th> City </th>
                <th> Gender </th>
                <th colspan='2'> Action </th></tr>`;

            for (let i = 0; i < arr_data.length; i++) {
                table += `<tr>
                <td>${arr_data[i].id}</td>
                <td>${arr_data[i].fname}</td>
                <td>${arr_data[i].lname}</td>
                <td>${arr_data[i].add}</td>
                <td>${arr_data[i].num}</td>
                <td>${arr_data[i].city}</td>
                <td>${arr_data[i].gender}</td>

                <td><button type="button" id='${i}' onclick='delete_record(${i})'>Delete</button></td>
                <td><button type="button" id='${i}' onclick='update_record(${i})'>Update</button></td></tr>`;
            }
            // table += `</table>`;
            document.getElementById('data').innerHTML = table;
            reset();
        }

        // Detele Record...
        function delete_record(id) {
            // debugger;
            arr_data.splice(id, 1);
            document.getElementById(id).parentNode.parentNode.remove();
        }

        // Update record..
        function update_record(id) {
            // console.log(id)
            document.getElementById("fname").value = arr_data[id].fname;
            document.getElementById("lname").value = arr_data[id].lname;
            document.getElementById("add").value = arr_data[id].add;
            document.getElementById("num").value = arr_data[id].num;
            document.getElementById("city").value = arr_data[id].city;
            if (arr_data[id].gender == "Male") {
                document.getElementById("male").checked = true;
            } else if (arr_data[id].gender == "Female") {
                document.getElementById("female").checked = true;
            } else {
                document.getElementById("other").checked = true;
            }

            document.getElementById('up_btn').innerHTML = `<button type="button" onclick="updated_record(${id})" value="Update">Update</button>`;
            // document.getElementById("sub_btn").style.display= "none";
        }

        function updated_record(idd) {
            console.log(arr_data)
            console.log(document.getElementById("fname").value)
            arr_data[idd] = {
                "id": idd + 1,
                "fname": document.getElementById("fname").value,
                "lname": document.getElementById("lname").value,
                "add": document.getElementById("add").value,
                "num": document.getElementById("num").value,
                "city": document.getElementById("city").value,
                "gender": document.querySelector('input[name="gen"]:checked').value,

            };
            show_data();
            // document.getElementById("up_btn").style.display= "none";
            // document.getElementById("sub_btn").style.display= "";
        }

        // Reset Fields..
        function reset() {
            document.getElementById("fname").value = "";
            document.getElementById("lname").value = "";
            document.getElementById("add").value = "";
            document.getElementById("num").value = "";
            document.getElementById("city").value = "";
            document.querySelector("input[value='other']").checked = false;
            document.querySelector("input[value='Male']").checked = false;
            document.querySelector("input[value='Female']").checked = false;


        }

    </script>
</body>

</html>