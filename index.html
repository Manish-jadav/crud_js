<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD </title>
</head>
<body>
    <table border="6">
        <tr>
            <td>First Name </td>
            <td><input type="text" id="fname"></td>
        </tr>
        <tr>
            <td>Last Name </td>
            <td><input type="text" id="lname"></td>
        </tr>
        <tr>
            <td>Address</td>
            <td><input type="text" id="add"></td>
        </tr>
        <tr>
            <td>Mobile Number </td>
            <td><input type="text" id="num"></td>
        </tr>
        <tr>
            <td>City</td>
            <td><input type="text" id="city"></td>
        </tr>
        <tr>
            <td align="center" id=""><button type="button" onclick="submit_data()" value="Submit">Submit</button></td>
            <td id="up_btn" align="center"></td>
        </tr>
    </table>
    <br>
    <div id="data"></div>

    <script>

        var table = '';
        var arr_data = new Array();
        var obj = new Object();
        var id = 0;
        
        //Submit Data..
        function submit_data() {
            id++;
            obj = {
                id: id,
                fname: document.getElementById('fname').value,
                lname: document.getElementById('lname').value,
                add: document.getElementById('add').value,
                num: document.getElementById('num').value,
                city: document.getElementById('city').value,
            }
            arr_data.push(obj);
            console.log(arr_data);
            show_data();
        }

        //Show data in table..
        function show_data(){
            table = `<table border='4'>
                <tr>
                <th> Id </th>
                <th> First Name </th>
                <th> last Name </th>
                <th> Address </th>
                <th>Mobile Number </th>
                <th> City </th>
                <th colspan='2'> Action </th></tr>`;

            for (let i = 0; i < arr_data.length; i++) {
                table += `<tr>
                <td>${arr_data[i].id}</td>
                <td>${arr_data[i].fname}</td>
                <td>${arr_data[i].lname}</td>
                <td>${arr_data[i].add}</td>
                <td>${arr_data[i].num}</td>
                <td>${arr_data[i].city}</td>
                <td><button type="button" id='${i}' onclick='delete_record(${i})'>Delete</button></td>
                <td><button type="button" id='${i}' onclick='update_record(${i})'>Update</button></td></tr>`;
            }
            // table += `</table>`;
            document.getElementById('data').innerHTML = table;
            reset();
        }
        
        // Detele Record...
        function delete_record(id) {
            // debugger;
            arr_data.splice(id, 1);
            document.getElementById(id).parentNode.parentNode.remove();
        }

        // Update record..
        function update_record(id) {
            // console.log(id)
            document.getElementById("fname").value = arr_data[id].fname;
            document.getElementById("lname").value = arr_data[id].lname;
            document.getElementById("add").value = arr_data[id].add;
            document.getElementById("num").value = arr_data[id].num;
            document.getElementById("city").value = arr_data[id].city;
            document.getElementById('up_btn').innerHTML = `<button type="button" onclick="updated_record(${id})" value="Update">Update</button>`
        }

        function updated_record(idd) {
            console.log(arr_data)
            console.log(document.getElementById("fname").value)
            arr_data[idd] = {
                "id": idd+1,
                "fname": document.getElementById("fname").value,
                "lname": document.getElementById("lname").value,
                "add": document.getElementById("add").value,
                "num": document.getElementById("num").value,
                "city": document.getElementById("city").value
            };
            show_data();
            // console.log(obj)
            // console.log(arr_data)
        }

        // Reset Fields..
        function reset(){
            document.getElementById("fname").value="";
            document.getElementById("lname").value="";
            document.getElementById("add").value="";
            document.getElementById("num").value="";
            document.getElementById("city").value="";

        }
    
    </script>
</body>

</html>